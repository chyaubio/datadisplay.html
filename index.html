<html>
  <head>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
     #air-quality-data {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 200px;
        height: 100px;
        background-color: rgba(255, 255, 255, 0.8);
        padding: 10px;
        text-align: center;
        border-radius: 10px;
      }
     #logo {
        position: absolute;
        top: 10px;
        left: 10px;
        width: 200px;
        height: 200px;
        opacity: 0;
      }
    </style>
  </head>
  <body>
    <div id="webcam-feed"></div>
    <img id="logo" src="https://raw.githubusercontent.com/chyaubio/datadisplay.html/main/companylogo.png">
    <div id="air-quality-data"></div>
    <script>
      // Get the webcam feed
     navigator.mediaDevices.getUserMedia({ video: { facingMode: "environment" }, audio: false })
        .then(function (stream) {
          var video = document.createElement("video");
          video.srcObject = stream;
          video.play();
          video.style.width = "100%";
          video.style.height = "100%";
          video.style.objectFit = "cover";
          document.getElementById("webcam-feed").appendChild(video);

          // Move the logo to the top left corner
          document.getElementById("logo").style.top = "30px";
          document.getElementById("logo").style.left = "800px";

          // Fade in the logo
          $("#logo").animate({
            opacity: 0.8
          }, 8000);

// Get the device's GPS location
navigator.geolocation.getCurrentPosition(function (position) {
  var lat = position.coords.latitude;
  var lng = position.coords.longitude;

  // Get the air quality data from AQICN
  $.get(`https://api.waqi.info/feed/geo:${lat};${lng}/?token=b4925c40110ed2049ee5f6deb33a490b38a9f1e3`, function (aqData) {
    var aqIndex = aqData.data.aqi;
    var aqLevel = "";
    var aqColor = "";
    if (aqIndex <= 50) {
      aqLevel = "Good";
      aqColor = "green";
    } else if (aqIndex <= 100) {
      aqLevel = "Moderate";
      aqColor = "yellow";
    } else if (aqIndex <= 150) {
      aqLevel = "Unhealthy for Sensitive Groups";
      aqColor = "orange";
    } else if (aqIndex <= 200) {
      aqLevel = "Unhealthy";
      aqColor = "red";
    } else if (aqIndex <= 300) {
      aqLevel = "Very Unhealthy";
      aqColor = "darkred";
    } else {
      aqLevel = "Hazardous";
      aqColor = "purple";
    }
    document.getElementById("air-quality-data").innerHTML = `<p style="color: ${aqColor};">Air Quality Index: ${aqIndex} (${aqLevel})</p>`;
    
    // Get the weather data from AQICN
    $.get(`https://api.waqi.info/feed/geo:${lat};${lng}/?token=b4925c40110ed2049ee5f6deb33a490b38a9f1e3`, function (weatherData) {
      // Use the weatherData object to display the weather information
      var temperature = weatherData.main.temp;
      var humidity = weatherData.main.humidity;
      var weather = weatherData.weather[0].description;
      document.getElementById("air-quality-data").innerHTML += `<p>Temperature: ${temperature} &#8451;</p><p>Humidity: ${humidity}%</p><p>Weather: ${weather}</p>`;
    });
  });
});
        })
        .catch(function (err) {
          console.error("Failed to get webcam feed:", err);
        });
    </script>
  </body>
</html>
